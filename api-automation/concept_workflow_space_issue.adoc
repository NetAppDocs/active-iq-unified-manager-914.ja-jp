---
permalink: api-automation/concept_workflow_space_issue.html 
sidebar: sidebar 
keywords: determine, space, issue, aggregate 
summary: Active IQ Unified ManagerのデータセンターAPIを使用して、ボリューム内のスペースの可用性と使用率を監視できます。ボリューム内のスペースの問題を特定し、利用率が高いストレージリソースや利用率が低いストレージリソースを特定できます。 
---
= APIを使用したアグリゲート内のスペースの問題の特定
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
Active IQ Unified ManagerのデータセンターAPIを使用して、ボリューム内のスペースの可用性と使用率を監視できます。ボリューム内のスペースの問題を特定し、利用率が高いストレージリソースや利用率が低いストレージリソースを特定できます。

アグリゲート用のデータセンターAPIは、使用可能スペースと使用済みスペース、およびスペース削減効率の設定に関する関連情報を取得します。また、指定した属性に基づいて取得した情報をフィルタすることもできます。

アグリゲートのスペース不足を確認する方法の1つは、環境にオートサイズモードが有効になっているボリュームがあるかどうかを確認することです。次に、利用率の高いボリュームを特定し、対処方法を実行します。

次のフローチャートは、オートサイズモードが有効になっているボリュームに関する情報を取得するプロセスを示しています。

image::../media/space_utilization.gif[スペース使用量]

このフローは、クラスタがONTAPで作成されてUnified Managerに追加されていることを前提としています。

. 値がわからない場合は、クラスタキーを取得します。
+
[cols="3*"]
|===
| カテゴリ | HTTP動詞 | パス 


 a| 
データセンター
 a| 
取得
 a| 
`/datacenter/cluster/clusters`

|===
. クラスタキーをフィルタパラメータとして使用して、そのクラスタ上のアグリゲートを照会します。
+
[cols="3*"]
|===
| カテゴリ | HTTP動詞 | パス 


 a| 
データセンター
 a| 
取得
 a| 
`/datacenter/storage/aggregates`

|===
. 応答から、アグリゲートのスペース使用量を分析し、スペースに問題があるアグリゲートを特定します。スペースに問題がある各アグリゲートについて、同じJSON出力からアグリゲートキーを取得します。
. 各アグリゲートキーを使用して、autosize.modeパラメータの値がとなっているすべてのボリュームを次のようにフィルタリングします。 `grow.`
+
[cols="3*"]
|===
| カテゴリ | HTTP動詞 | パス 


 a| 
データセンター
 a| 
取得
 a| 
`/datacenter/storage/volumes`

|===
. 利用率の高いボリュームを分析します。
. ボリューム内のスペースの問題に対処するために、アグリゲート間でのボリュームの移動など、必要な対処策を実行します。これらの操作は、ONTAPまたはUnified ManagerのWeb UIから実行できます。

